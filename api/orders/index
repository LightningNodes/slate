<h1 id='orders'>Orders</h1>

<h2 id="place-order">Place an Order </h2>

<p><code>POST /v1/order/place-order</code></p>

<p>Place an order (either a market order or a limit order) on Pi42&#39;s trading platform. It allows users to submit an order to buy or sell a specific asset.</p>

<aside class="notice"> Note:
<ul>
<li>Price is compulsory to place a limit order.</li>
<li>To successfully place an order from a position, you need to pass the <code>positionId</code> in the request payload, which can be obtained calling the
<a href="#get-positions">Get Positions API</a></li>
</ul>
</aside>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">placeOrder</span><span class="p">(</span><span class="nx">orderType</span><span class="p">,</span> <span class="nx">quantity</span> <span class="o">=</span> <span class="mi">38</span><span class="p">,</span> <span class="nx">price</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Validate orderType</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="dl">"</span><span class="s2">MARKET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">orderType</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Invalid order type. Must be 'MARKET' or 'LIMIT'.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Validate quantity</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">quantity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Quantity must be greater than 0.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">placeType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ORDER_FORM</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">quantity</span><span class="p">:</span> <span class="nx">quantity</span><span class="p">,</span> <span class="c1">// Dynamically set quantity</span>
    <span class="na">side</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">symbol</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GRTINR</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">reduceOnly</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">marginAsset</span><span class="p">:</span> <span class="dl">"</span><span class="s2">INR</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">orderType</span><span class="p">,</span> <span class="c1">// Set the order type dynamically</span>
  <span class="p">};</span>

  <span class="c1">// Add additional parameters if the order is a LIMIT order</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">orderType</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">price</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">price</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Price must be specified and greater than 0 for LIMIT orders.</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">params</span><span class="p">.</span><span class="nx">price</span> <span class="o">=</span> <span class="nx">price</span><span class="p">;</span> <span class="c1">// Dynamically set price for LIMIT orders</span>
  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/place-order</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Call the postRequest function</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">postRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to place order:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Example usage for market order</span>
<span class="nx">placeOrder</span><span class="p">(</span><span class="dl">"</span><span class="s2">MARKET</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Example usage for limit order with price</span>
<span class="nx">placeOrder</span><span class="p">(</span><span class="dl">"</span><span class="s2">LIMIT</span><span class="dl">"</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mf">11.9</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">place_order</span><span class="p">():</span>
    <span class="c1"># Generate the current timestamp in milliseconds
</span>    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

    <span class="c1"># Define the order parameters
</span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>        <span class="c1"># Current timestamp in milliseconds
</span>        <span class="s">'placeType'</span><span class="p">:</span> <span class="s">'ORDER_FORM'</span><span class="p">,</span>     <span class="c1"># Type of order placement, e.g., 'ORDER_FORM'
</span>        <span class="s">'quantity'</span><span class="p">:</span> <span class="mf">0.002</span><span class="p">,</span>             <span class="c1"># Quantity of the asset to trade
</span>        <span class="s">'side'</span><span class="p">:</span> <span class="s">'BUY'</span><span class="p">,</span>                 <span class="c1"># Order side, either 'BUY' or 'SELL'
</span>        <span class="s">'symbol'</span><span class="p">:</span> <span class="s">'BTCUSDT'</span><span class="p">,</span>           <span class="c1"># Trading pair, e.g., Bitcoin to USDT
</span>        <span class="s">'type'</span><span class="p">:</span> <span class="s">'MARKET'</span><span class="p">,</span>              <span class="c1"># Order type, either 'MARKET' or 'LIMIT'
</span>        <span class="s">'reduceOnly'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>           <span class="c1"># Whether to reduce an existing position only
</span>        <span class="s">'marginAsset'</span><span class="p">:</span> <span class="s">'INR'</span><span class="p">,</span>          <span class="c1"># The asset used as margin (INR in this case)
</span>        <span class="s">'deviceType'</span><span class="p">:</span> <span class="s">'WEB'</span><span class="p">,</span>           <span class="c1"># Device type (e.g., WEB, MOBILE)
</span>        <span class="s">'userCategory'</span><span class="p">:</span> <span class="s">'EXTERNAL'</span><span class="p">,</span>    <span class="c1"># User category (e.g., EXTERNAL, INTERNAL)
</span>        <span class="s">'price'</span><span class="p">:</span> <span class="mi">50000</span><span class="p">,</span>                <span class="c1"># Price for the limit order (included here but irrelevant for market orders)
</span>    <span class="p">}</span>

    <span class="c1"># Convert the parameters to a JSON string to sign
</span>    <span class="n">data_to_sign</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

    <span class="c1"># Generate the signature for authentication
</span>    <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data_to_sign</span><span class="p">)</span>

    <span class="c1"># Define the headers including the API key and the signature
</span>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
        <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Send the POST request to place the order
</span>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/v1/order/place-order'</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

        <span class="c1"># Raise an HTTPError if the response status is 4xx or 5xx
</span>        <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>

        <span class="c1"># Parse the JSON response data
</span>        <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>

        <span class="c1"># Print the success message with the order details
</span>        <span class="k">print</span><span class="p">(</span><span class="s">'Order placed successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

    <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c1"># Handle HTTP errors specifically
</span>        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error: </span><span class="si">{</span><span class="n">err</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">err</span><span class="p">.</span><span class="n">response</span> <span class="k">else</span> <span class="n">err</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Handle any other unexpected errors
</span>        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div>
<table style="border-collapse: collapse;">
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Type</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>orderType</td>
      <td>string</td>
      <td>Yes</td>
      <td>The type of the order. It can be "MARKET" or "LIMIT".</td>
    </tr>
    <tr>
      <td>quantity</td>
      <td>number</td>
      <td>No</td>
      <td>The amount of the asset to be ordered. Specify the desired quantity.</td>
    </tr>
    <tr>
      <td>price</td>
      <td>number</td>
      <td>Conditional</td>
      <td>The price at which to place the LIMIT order. Must be specified if orderType is "LIMIT".</td>
    </tr>
    <tr>
      <td>placeType</td>
      <td>string</td>
      <td>Yes</td>
      <td>Fixed value "ORDER_FORM". Indicates the type of order placement.</td>
    </tr>
    <tr>
      <td>side</td>
      <td>string</td>
      <td>Yes</td>
      <td>The side of the order, which is "BUY" in this case.</td>
    </tr>
    <tr>
      <td>symbol</td>
      <td>string</td>
      <td>Yes</td>
      <td>The trading pair symbol, for example, "GRTINR".</td>
    </tr>
    <tr>
      <td>reduceOnly</td>
      <td>boolean</td>
      <td>No</td>
      <td>Indicates whether the order should only reduce the position. Default is false.</td>
    </tr>
    <tr>
      <td>marginAsset</td>
      <td>string</td>
      <td>Yes</td>
      <td>The asset used for margin, such as "INR".</td>
    </tr>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>Yes</td>
      <td>The type of order to place, based on the value of <code>orderType</code>.</td>
    </tr>
        <tr>
      <td>takeProfitPrice</td>
      <td>number</td>
      <td>No</td>
      <td>Price at which take profit order should be executed.</td>
    </tr>
        <tr>
      <td>stopLossPrice</td>
      <td>number</td>
      <td>No</td>
      <td>Price at which stop loss order should be executed.</td>
    </tr>
  </tbody>
</table>
<h3 id='response'>Response</h3>
<p>The response parameters are described below:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19db8caf3cd3e5a08cfa-6895-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-13T08:19:18.029Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">58002</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderAmount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.003</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filledAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"availableBalance"</span><span class="p">:</span><span class="w"> </span><span class="mf">8564.64</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19db8caf3cd3e5a08cfa-6895-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORDER"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRIMARY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"placeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORDER_FORM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lockedMargin"</span><span class="p">:</span><span class="w"> </span><span class="mf">19.5274</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"marginAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lockedMarginInMarginAsset"</span><span class="p">:</span><span class="w"> </span><span class="mf">1698.88</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>clientOrderId</strong></td>
      <td>Unique identifier for the client order (<code>19db8caf3cd3e5a08cfa-6895-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>time</strong></td>
      <td>Timestamp when the order was placed (<code>2024-09-13T08:19:18.029Z</code>).</td>
    </tr>
    <tr>
      <td><strong>symbol</strong></td>
      <td>The trading pair for the order (<code>BTCUSDT</code>), indicating Bitcoin (BTC) traded against USDT (Tether).</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>The type of contract for the order (<code>PERPETUAL</code>), indicating a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>type</strong></td>
      <td>The type of order (<code>MARKET</code>), indicating a market order.</td>
    </tr>
    <tr>
      <td><strong>side</strong></td>
      <td>The side of the order (<code>BUY</code>).</td>
    </tr>
    <tr>
      <td><strong>price</strong></td>
      <td>The price at which the order is to be executed (<code>58002 USDT</code>).</td>
    </tr>
    <tr>
      <td><strong>orderAmount</strong></td>
      <td>The amount of the order (<code>0.003 BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>filledAmount</strong></td>
      <td>The amount of the order that has been filled (<code>0</code>, indicating no amount has been filled yet).</td>
    </tr>
    <tr>
      <td><strong>availableBalance</strong></td>
      <td>The available balance for the order (<code>8564.64 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>linkId</strong></td>
      <td>Link identifier associated with the order (<code>19db8caf3cd3e5a08cfa-6895-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>linkType</strong></td>
      <td>The type of link for the order (<code>ORDER</code>).</td>
    </tr>
    <tr>
      <td><strong>subType</strong></td>
      <td>Subtype of the order (<code>PRIMARY</code>).</td>
    </tr>
    <tr>
      <td><strong>placeType</strong></td>
      <td>The method used to place the order (<code>ORDER_FORM</code>).</td>
    </tr>
    <tr>
      <td><strong>lockedMargin</strong></td>
      <td>The amount of margin locked for the order (<code>19.5274 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The base asset being traded (<code>BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (<code>USDT</code>).</td>
    </tr>
    <tr>
      <td><strong>marginAsset</strong></td>
      <td>The asset used for margin (<code>INR</code>).</td>
    </tr>
    <tr>
      <td><strong>lockedMarginInMarginAsset</strong></td>
      <td>The amount of margin locked in the margin asset (<code>1698.88 INR</code>).</td>
    </tr>
  </tbody>
</table>

<h2 id="add-margin"> Add Margin </h2>

<p><code>POST /v1/order/add-margin</code></p>

<p>Add margin to a specific position. It requires a unique position ID and the amount of margin to be added. This operation helps in increasing the margin available for a given position, which can be used for trading or managing positions.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">addMargin</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Define the API endpoint for adding margin</span>
    <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/add-margin</span><span class="dl">"</span><span class="p">;</span>

    <span class="c1">// Define the fixed values for positionId and amount</span>
    <span class="kd">const</span> <span class="nx">positionId</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">18c6c979-b089-4e67-b627-4c2072d0d5cb</span><span class="dl">"</span><span class="p">;</span>  <span class="c1">// Unique identifier for the position</span>
    <span class="kd">const</span> <span class="nx">amount</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// The amount of margin to be added</span>

    <span class="c1">// Prepare request payload</span>
    <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">positionId</span><span class="p">:</span> <span class="nx">positionId</span><span class="p">,</span>  <span class="c1">// ID of the position to which margin is being added</span>
        <span class="na">amount</span><span class="p">:</span> <span class="nx">amount</span><span class="p">,</span>          <span class="c1">// Amount of margin to add</span>
    <span class="p">};</span>

    <span class="c1">// Call the postRequest function to send the POST request to the API</span>
    <span class="k">return</span> <span class="k">await</span> <span class="nx">postRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">add_margin</span><span class="p">():</span>
    <span class="n">position_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the positionId: "</span><span class="p">)</span>
    <span class="n">amount_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the amount: "</span><span class="p">)</span>

    <span class="n">add_margin_url</span> <span class="o">=</span> <span class="s">"https://fapi.pi42.com/v1/order/add-margin"</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">amount</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">amount_input</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
        <span class="n">amount</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">amount_input</span><span class="p">)</span>

    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'positionId'</span><span class="p">:</span> <span class="n">position_id</span><span class="p">,</span>
        <span class="s">'amount'</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
        <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="p">}</span>

    <span class="n">data_to_sign</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data_to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
        <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
        <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">add_margin_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Margin added successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

    <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Failed </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>positionId</td>
            <td>string</td>
            <td>Yes</td>
            <td>Unique identifier for the position to which margin is being added</td>
        </tr>
        <tr>
            <td>amount</td>
            <td>number</td>
            <td>Yes</td>
            <td>Amount of margin to be added to the specified position</td>
        </tr>
    </tbody>
</table>

<aside class="notice">
The required <code>positionId</code> can be obtained calling the <a href="#get-positions">Get Positions API</a>
</aside>
<h3 id='response-2'>Response</h3>
<p>The response parameters are described below:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"lockedBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">870</span><span class="p">,</span><span class="w">
  </span><span class="nl">"withdrawableBalance"</span><span class="p">:</span><span class="w"> </span><span class="mf">9393.52</span><span class="p">,</span><span class="w">
  </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Margin added successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>lockedBalance</strong></td>
      <td>The amount of balance that is locked and cannot be withdrawn (870 INR).</td>
    </tr>
    <tr>
      <td><strong>withdrawableBalance</strong></td>
      <td>The amount of balance available for withdrawal (9393.52 INR).</td>
    </tr>
    <tr>
      <td><strong>asset</strong></td>
      <td>The asset or currency being used (INR).</td>
    </tr>
    <tr>
      <td><strong>message</strong></td>
      <td>A confirmation message indicating that margin was added successfully.</td>
    </tr>
  </tbody>
</table>

<h2 id="reduce-margin">Reduce Margin</h2>

<p><code>POST /v1/order/reduce-margin</code></p>

<p>Reduce the margin on an existing trading position.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">reduceMargin</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Define the API endpoint for reducing margin</span>
    <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/reduce-margin</span><span class="dl">"</span><span class="p">;</span>

    <span class="c1">// Define the fixed values for positionId and amount</span>
    <span class="kd">const</span> <span class="nx">positionId</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">18c6c979-b089-4e67-b627-4c2072d0d5cb</span><span class="dl">"</span><span class="p">;</span>  <span class="c1">// Unique identifier for the position</span>
    <span class="kd">const</span> <span class="nx">amount</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// The amount of margin to be reduced</span>

    <span class="c1">// Prepare request payload</span>
    <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">positionId</span><span class="p">:</span> <span class="nx">positionId</span><span class="p">,</span>  <span class="c1">// ID of the position from which margin is being reduced</span>
        <span class="na">amount</span><span class="p">:</span> <span class="nx">amount</span><span class="p">,</span>          <span class="c1">// Amount of margin to reduce</span>
    <span class="p">};</span>

    <span class="c1">// Call the postRequest function to send the POST request to the API</span>
    <span class="k">return</span> <span class="k">await</span> <span class="nx">postRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">reduce_margin</span><span class="p">():</span>
    <span class="c1"># Collect position ID and amount to reduce from user input
</span>    <span class="n">position_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the positionId: "</span><span class="p">)</span>
    <span class="n">amountInput</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the amount to reduce: "</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Convert input to integer or float as necessary
</span>        <span class="n">amount</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">amountInput</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
        <span class="n">amount</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">amountInput</span><span class="p">)</span>

    <span class="c1"># Generate current timestamp in milliseconds
</span>    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

    <span class="c1"># Prepare the request payload (JSON)
</span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'positionId'</span><span class="p">:</span> <span class="n">position_id</span><span class="p">,</span>
        <span class="s">'amount'</span><span class="p">:</span> <span class="n">amount</span><span class="p">,</span>
        <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="p">}</span>

    <span class="c1"># Convert the payload to a JSON string for signature
</span>    <span class="n">data_to_sign</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

    <span class="c1"># Generate the signature using a helper function
</span>    <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data_to_sign</span><span class="p">)</span>

    <span class="c1"># Set the headers for the POST request
</span>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
        <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
        <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span>
    <span class="p">}</span>

    <span class="c1"># Construct the full API endpoint URL
</span>    <span class="n">reduce_margin_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/v1/order/reduce-margin"</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Send the POST request to reduce margin
</span>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">reduce_margin_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># Raises an error for HTTP responses with 4xx/5xx status codes
</span>        <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Margin reduced successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error: </span><span class="si">{</span><span class="n">err</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">err</span><span class="p">.</span><span class="n">response</span> <span class="k">else</span> <span class="n">err</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>positionId</td>
            <td>string</td>
            <td>Yes</td>
            <td>Unique identifier for the position from which margin is being reduced</td>
        </tr>
        <tr>
            <td>amount</td>
            <td>number</td>
            <td>Yes</td>
            <td>Amount of margin to reduce from the specified position</td>
        </tr>
    </tbody>
</table>

<aside class="notice">
The required <code>positionId</code> can be obtained calling the <a href="#get-positions">Get Positions API</a>
</aside>
<h3 id='response-3'>Response</h3>
<p>The JSON body returned in the response is as follows:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"lockedBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">870</span><span class="p">,</span><span class="w">
    </span><span class="nl">"withdrawableBalance"</span><span class="p">:</span><span class="w"> </span><span class="mf">9393.52</span><span class="p">,</span><span class="w">
    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Margin reduced successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>lockedBalance</strong></td>
      <td>The amount of balance that is locked and cannot be withdrawn (870 INR).</td>
    </tr>
    <tr>
      <td><strong>withdrawableBalance</strong></td>
      <td>The amount of balance available for withdrawal (9393.52 INR).</td>
    </tr>
    <tr>
      <td><strong>asset</strong></td>
      <td>The asset or currency being used (INR).</td>
    </tr>
    <tr>
      <td><strong>message</strong></td>
      <td>A confirmation message indicating that margin was reduced successfully.</td>
    </tr>
  </tbody>
</table>

<h2 id="get-open-orders">Get Open Orders</h2>

<p><code>GET /v1/order/open-orders</code></p>

<p>Retrieves the open orders for a given account. It supports filtering results based on optional parameters such as page size, sorting order, and timestamps. The symbol parameter can be used to filter the results to a specific trading pair. <br/>This endpoint is useful for fetching the current active orders and managing them accordingly.</p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">get_open_orders</span><span class="p">():</span>
<span class="c1"># Generate the current timestamp
</span>    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># Prepare parameters with the current timestamp
</span>    <span class="n">params</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"timestamp=</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Generate the signature using the current timestamp
</span>    <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

<span class="c1"># Prepare headers
</span>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
    <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">open_orders_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/v1/order/open-orders"</span>
    <span class="k">try</span><span class="p">:</span>

<span class="c1"># Send GET request to fetch open orders with the timestamp parameter
</span>    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">open_orders_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">})</span>
    <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span> <span class="c1"># Raises an error for bad HTTP responses
</span>    <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Open orders fetched successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Failed </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">getOpenOrders</span><span class="p">()</span> <span class="p">{</span>
<span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">startTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1696425435000</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">endTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1725451568979</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
 <span class="c1">// Optional Params</span>
    <span class="na">pageSize</span><span class="p">:</span> <span class="nx">pageSize</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="na">sortOrder</span><span class="p">:</span> <span class="nx">sortOrder</span><span class="p">,</span>
    <span class="na">startTimestamp</span><span class="p">:</span> <span class="nx">startTimestamp</span><span class="p">,</span>
    <span class="na">endTimestamp</span><span class="p">:</span> <span class="nx">endTimestamp</span><span class="p">,</span>
    <span class="na">symbol</span><span class="p">:</span> <span class="nx">symbol</span><span class="p">,</span>
    <span class="p">};</span>

<span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/open-orders</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Your endpoint for fetching open orders</span>

<span class="c1">// Call the postRequest function</span>
<span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>pageSize</td>
            <td>string</td>
            <td>No</td>
            <td>The number of results to return per page</td>
        </tr>
        <tr>
            <td>sortOrder</td>
            <td>string</td>
            <td>No</td>
            <td>The sorting order for the results (e.g., "asc" or "desc")</td>
        </tr>
        <tr>
            <td>startTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The start timestamp (in milliseconds) for filtering open orders</td>
        </tr>
        <tr>
            <td>endTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The end timestamp (in milliseconds) for filtering open orders</td>
        </tr>
        <tr>
            <td>symbol</td>
            <td>string</td>
            <td>No</td>
            <td>The trading pair symbol to filter the orders (e.g., BTCUSDT)</td>
        </tr>
    </tbody>
</table>
<h3 id='response-4'>Response</h3>
<p>The response parameters are described below:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccef6a84a5cf6a463353-6238-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-13T07:57:15.305Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCINR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">5170418</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderAmount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.002</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filledAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ccef6a84a5cf6a463353-6238-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORDER"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRIMARY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"placeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORDER_FORM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>clientOrderId</strong></td>
      <td>Unique identifier for the client's order (<code>ccef6a84a5cf6a463353-6238-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>time</strong></td>
      <td>Timestamp when the order was placed (<code>2024-09-13T07:57:15.305Z</code>).</td>
    </tr>
    <tr>
      <td><strong>symbol</strong></td>
      <td>Trading pair involved (<code>BTCINR</code>), indicating Bitcoin (BTC) traded against Indian Rupees (INR).</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>Type of contract (<code>PERPETUAL</code>), suggests a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>type</strong></td>
      <td>The order type (<code>MARKET</code>), meaning the order will be executed immediately at the current market price.</td>
    </tr>
    <tr>
      <td><strong>side</strong></td>
      <td>Indicates whether the order is to buy or sell (<code>BUY</code>).</td>
    </tr>
    <tr>
      <td><strong>price</strong></td>
      <td>The price per unit of Bitcoin at the time the order was placed (<code>5170418 INR</code> per BTC).</td>
    </tr>
    <tr>
      <td><strong>orderAmount</strong></td>
      <td>The amount of Bitcoin to be purchased (<code>0.002</code> BTC).</td>
    </tr>
    <tr>
      <td><strong>filledAmount</strong></td>
      <td>Amount of the order that has been filled so far (<code>0</code>, indicating it hasn't been executed yet).</td>
    </tr>
    <tr>
      <td><strong>linkId</strong></td>
      <td>Additional reference that ties this order to a broader system or linked entities (<code>ccef6a84a5cf6a463353-6238-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>linkType</strong></td>
      <td>The type of link (<code>ORDER</code>).</td>
    </tr>
    <tr>
      <td><strong>subType</strong></td>
      <td>Order classification (<code>PRIMARY</code>), indicating the main order type.</td>
    </tr>
    <tr>
      <td><strong>placeType</strong></td>
      <td>Describes where the order was placed from (<code>ORDER_FORM</code>).</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The asset being bought (Bitcoin).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (INR).</td>
    </tr>
  </tbody>
</table>

<h2 id="get-order-history">Get Order History</h2>

<p><code>GET /v1/order/order-history</code></p>

<p>Provides historical order data for a given account.</p>

<p>It supports optional filtering by page size, sorting order, and timestamps to narrow down the results. The symbol parameter allows filtering the results to a specific trading pair.</p>

<p>This endpoint is helpful for reviewing past orders and analyzing historical trading activity.</p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Function to fetch and display order history
</span><span class="k">def</span> <span class="nf">order_history</span><span class="p">():</span>
<span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">order_history_url</span> <span class="o">=</span> <span class="s">"https://fapi.pi42.com/v1/order/order-history"</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'sortOrder'</span><span class="p">:</span> <span class="s">'desc'</span><span class="p">,</span>
<span class="s">'pageSize'</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
 <span class="p">}</span>

<span class="n">query_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"sortOrder=</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'sortOrder'</span><span class="p">]</span><span class="si">}</span><span class="s">&amp;pageSize=</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'pageSize'</span><span class="p">]</span><span class="si">}</span><span class="s">&amp;timestamp=
</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'timestamp'</span><span class="p">]</span><span class="si">}</span><span class="s">"</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">query_string</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
<span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">try</span><span class="p">:</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">order_history_url</span><span class="si">}</span><span class="s">?</span><span class="si">{</span><span class="n">query_string</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Order history fetched successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Failed </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">//Get Order History</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">getOrderHistory</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">startTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1696425435000</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">endTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1725451568979</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// Optional Params</span>
    <span class="na">pageSize</span><span class="p">:</span> <span class="nx">pageSize</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="na">sortOrder</span><span class="p">:</span> <span class="nx">sortOrder</span><span class="p">,</span>
    <span class="na">startTimestamp</span><span class="p">:</span> <span class="nx">startTimestamp</span><span class="p">,</span>
    <span class="na">endTimestamp</span><span class="p">:</span> <span class="nx">endTimestamp</span><span class="p">,</span>
    <span class="na">symbol</span><span class="p">:</span> <span class="nx">symbol</span><span class="p">,</span>
  <span class="p">};</span>
  <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/order-history</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Your endpoint for fetching order history</span>
  <span class="c1">// Call the postRequest function</span>
  <span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>pageSize</td>
            <td>string</td>
            <td>No</td>
            <td>The number of results to return per page</td>
        </tr>
        <tr>
            <td>sortOrder</td>
            <td>string</td>
            <td>No</td>
            <td>The sorting order for the results (e.g., "asc" or "desc")</td>
        </tr>
        <tr>
            <td>startTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The start timestamp (in milliseconds) for filtering order history</td>
        </tr>
        <tr>
            <td>endTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The end timestamp (in milliseconds) for filtering order history</td>
        </tr>
        <tr>
            <td>symbol</td>
            <td>string</td>
            <td>No</td>
            <td>The trading pair symbol to filter the orders (e.g., BTCUSDT)</td>
        </tr>
    </tbody>
</table>
<h3 id='response-5'>Response</h3>
<p>The details of the JSON object returned in the response body are as follows:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c707985129f41a13ab40-6238-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-13T10:48:57.630Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCINR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isIsolated"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5182995"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avgPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5182656"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"origQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10365.31"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cumQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"executedQty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reduceOnly"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FILLED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRIMARY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stopPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lockedMargin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lockedMarginInMarginAsset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"marginAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iconUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/pi42-dev-static/contract-icons/btc.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"leveragedQty"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.002</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>clientOrderId</strong></td>
      <td>Unique identifier for the client's order (<code>c707985129f41a13ab40-6238-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>updatedAt</strong></td>
      <td>The timestamp when the order was last updated (<code>2024-09-13T10:48:57.630Z</code>).</td>
    </tr>
    <tr>
      <td><strong>symbol</strong></td>
      <td>The trading pair involved (<code>BTCINR</code>), indicating Bitcoin (BTC) traded against Indian Rupees (INR).</td>
    </tr>
    <tr>
      <td><strong>type</strong></td>
      <td>The order type (<code>MARKET</code>), meaning the order was executed at the current market price.</td>
    </tr>
    <tr>
      <td><strong>isIsolated</strong></td>
      <td>Indicates whether the order is isolated (<code>true</code>), meaning it's an isolated margin trade.</td>
    </tr>
    <tr>
      <td><strong>side</strong></td>
      <td>Indicates whether the order is to buy or sell (<code>SELL</code>).</td>
    </tr>
    <tr>
      <td><strong>price</strong></td>
      <td>The price per unit of Bitcoin at the time the order was placed (<code>5182995 INR</code> per BTC).</td>
    </tr>
    <tr>
      <td><strong>avgPrice</strong></td>
      <td>The average price at which the order was executed (<code>5182656 INR</code> per BTC).</td>
    </tr>
    <tr>
      <td><strong>origQty</strong></td>
      <td>The original quantity in INR before conversion to BTC (<code>10365.31</code> INR).</td>
    </tr>
    <tr>
      <td><strong>cumQty</strong></td>
      <td>The cumulative amount of Bitcoin executed so far (<code>0.002</code> BTC).</td>
    </tr>
    <tr>
      <td><strong>executedQty</strong></td>
      <td>The total executed quantity of the order (<code>0.002</code> BTC).</td>
    </tr>
    <tr>
      <td><strong>reduceOnly</strong></td>
      <td>A flag indicating if the order is only to reduce an existing position (<code>false</code>).</td>
    </tr>
    <tr>
      <td><strong>status</strong></td>
      <td>The current status of the order (<code>FILLED</code>), meaning the order is completely executed.</td>
    </tr>
    <tr>
      <td><strong>leverage</strong></td>
      <td>The leverage applied to the trade (<code>25x</code>).</td>
    </tr>
    <tr>
      <td><strong>subType</strong></td>
      <td>The order classification (<code>PRIMARY</code>), indicating the main order type.</td>
    </tr>
    <tr>
      <td><strong>stopPrice</strong></td>
      <td>The stop price associated with the order (<code>null</code>), as this is not a stop order.</td>
    </tr>
    <tr>
      <td><strong>lockedMargin</strong></td>
      <td>The amount of margin locked in INR (<code>0</code> INR).</td>
    </tr>
    <tr>
      <td><strong>lockedMarginInMarginAsset</strong></td>
      <td>The amount of margin locked in the margin asset (<code>0</code> INR).</td>
    </tr>
    <tr>
      <td><strong>marginAsset</strong></td>
      <td>The asset used for margin (INR).</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>The type of contract (<code>PERPETUAL</code>), indicating a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>iconUrl</strong></td>
      <td>The URL of the contract icon (<a href="https://storage.googleapis.com/pi42-dev-static/contract-icons/btc.png" target="_blank">BTC Icon</a>).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (INR).</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The asset being traded (Bitcoin).</td>
    </tr>
    <tr>
      <td><strong>leveragedQty</strong></td>
      <td>The quantity of Bitcoin being traded with leverage (<code>0.002</code> BTC).</td>
    </tr>
  </tbody>
</table>

<h2 id="get-linked-orders">Get Linked Orders</h2>

<p><code>GET /v1/order/linked-orders</code></p>

<p>Retrieves orders that are linked by a specific link ID. It is used to fetch all orders associated with a given link ID, which can help in tracking related orders or managing linked order groups.</p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Function to fetch linked orders based on linkId
</span><span class="k">def</span> <span class="nf">linked_orders</span><span class="p">():</span>
<span class="n">link_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the Link Id: "</span><span class="p">)</span>
<span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">linked_orders_url</span> <span class="o">=</span> <span class="s">"https://fapi.pi42.com/v1/order/linked-orders"</span>

<span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">linked_orders_url</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">link_id</span><span class="si">}</span><span class="s">"</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
<span class="p">}</span>
<span class="n">query_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"timestamp=</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'timestamp'</span><span class="p">]</span><span class="si">}</span><span class="s">"</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">query_string</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
<span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
<span class="s">'accept'</span><span class="p">:</span> <span class="s">'*/*'</span>
 <span class="p">}</span>
<span class="k">try</span><span class="p">:</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s">?</span><span class="si">{</span><span class="n">query_string</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Linked orders fetched successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Failed </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// Get Linked Orders</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">linkedOrders</span><span class="p">(</span><span class="nx">linkId</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">linkId</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">6acd808ba5957340b009-6238-ext</span><span class="dl">"</span>
  <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="s2">`/v1/order/linked-orders/</span><span class="p">${</span><span class="nx">linkId</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span> <span class="c1">// Endpoint for fetching linked orders</span>

<span class="c1">// Call the getRequest function (similar to postRequest)</span>
  <span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Fetch Margin History</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchMarginHistory</span><span class="p">()</span> <span class="p">{</span>
 <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/fetch-margin-history</span><span class="dl">"</span><span class="p">;</span>
 <span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
 <span class="kd">const</span> <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">;</span>
 <span class="kd">const</span> <span class="nx">startTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1696425435000</span><span class="dl">"</span><span class="p">;</span>
 <span class="kd">const</span> <span class="nx">endTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1725451568979</span><span class="dl">"</span><span class="p">;</span>
 <span class="kd">const</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Prepare query parameters</span>
 <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>

<span class="c1">// Optional Params</span>
 <span class="na">pageSize</span><span class="p">:</span> <span class="nx">pageSize</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
 <span class="na">sortOrder</span><span class="p">:</span> <span class="nx">sortOrder</span><span class="p">,</span>
 <span class="na">startTimestamp</span><span class="p">:</span> <span class="nx">startTimestamp</span><span class="p">,</span>
 <span class="na">endTimestamp</span><span class="p">:</span> <span class="nx">endTimestamp</span><span class="p">,</span>
 <span class="na">symbol</span><span class="p">:</span> <span class="nx">symbol</span><span class="p">,</span>
 <span class="p">};</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>linkId</td>
            <td>string</td>
            <td>Yes</td>
            <td>The unique identifier for the linked orders</td>
        </tr>
    </tbody>
</table>

<aside class="notice">
Requires linkId that can be obtained from <a href="#place-order">Place Order API response.</a>
</aside>
<h3 id='response-6'>Response</h3>
<p>The details returned in the response body as are as follows:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m2l-1f04cd91efa7ebe09cad-6238-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-11T12:14:03.706Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCINR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MARKET"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">5054068</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orderAmount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.002</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filledAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m2l-1f04cd91efa7ebe09cad-6238-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PRIMARY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORDER_SL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"takeProfitPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stopLossPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"placeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ORDER_FORM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>clientOrderId</strong></td>
      <td>Unique identifier for the client's order (<code>m2l-1f04cd91efa7ebe09cad-6238-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>time</strong></td>
      <td>The timestamp when the order was created (<code>2024-09-11T12:14:03.706Z</code>).</td>
    </tr>
    <tr>
      <td><strong>symbol</strong></td>
      <td>The trading pair involved (<code>BTCINR</code>), indicating Bitcoin (BTC) traded against Indian Rupees (INR).</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>The type of contract (<code>PERPETUAL</code>), indicating a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>type</strong></td>
      <td>The order type (<code>MARKET</code>), meaning the order was executed at the current market price.</td>
    </tr>
    <tr>
      <td><strong>side</strong></td>
      <td>Indicates whether the order is to buy or sell (<code>BUY</code>).</td>
    </tr>
    <tr>
      <td><strong>price</strong></td>
      <td>The price per unit of Bitcoin at the time the order was placed (<code>5054068 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>orderAmount</strong></td>
      <td>The total amount of Bitcoin to be bought (<code>0.002 BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>filledAmount</strong></td>
      <td>The amount of Bitcoin that has been filled so far (<code>0 BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>linkId</strong></td>
      <td>Unique identifier for the linked order (<code>m2l-1f04cd91efa7ebe09cad-6238-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>subType</strong></td>
      <td>The order classification (<code>PRIMARY</code>), indicating the main order type.</td>
    </tr>
    <tr>
      <td><strong>linkType</strong></td>
      <td>Indicates the link type of the order (<code>ORDER_SL</code>), possibly linking to a stop-loss order.</td>
    </tr>
    <tr>
      <td><strong>takeProfitPrice</strong></td>
      <td>The take-profit price associated with the order (<code>null</code>), indicating no take-profit price set.</td>
    </tr>
    <tr>
      <td><strong>stopLossPrice</strong></td>
      <td>The stop-loss price associated with the order (<code>null</code>), indicating no stop-loss price set.</td>
    </tr>
    <tr>
      <td><strong>status</strong></td>
      <td>The current status of the order (<code>NEW</code>), meaning the order has been placed but not filled.</td>
    </tr>
    <tr>
      <td><strong>placeType</strong></td>
      <td>The method by which the order was placed (<code>ORDER_FORM</code>), likely using an order form interface.</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The base asset being traded (<code>BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (<code>INR</code>).</td>
    </tr>
  </tbody>
</table>

<h2 id="get-margin-history">Fetch Margin History</h2>

<p><code>GET /v1/order/fetch-margin-history</code></p>

<p>Retrieves the margin history for an account.</p>

<p>It supports optional filtering parameters like page size, sorting order, timestamps, and trading symbol.</p>

<p>This endpoint is useful for analyzing past margin activities and historical changes in margin levels.</p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">fetch_margin_history</span><span class="p">():</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="s">"/v1/order/fetch-margin-history"</span>
    <span class="n">symbol</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the symbol (e.g., BTCUSDT): "</span><span class="p">).</span><span class="n">upper</span><span class="p">()</span>

    <span class="n">pageSize</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">sortOrder</span> <span class="o">=</span> <span class="s">"desc"</span>

<span class="c1"># Generate current timestamp for signing
</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># Prepare query parameters
</span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'pageSize'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">pageSize</span><span class="p">),</span>
    <span class="s">'sortOrder'</span><span class="p">:</span> <span class="n">sortOrder</span><span class="p">,</span>
    <span class="s">'symbol'</span><span class="p">:</span> <span class="n">symbol</span><span class="p">,</span>
    <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="p">}</span>

<span class="c1"># Convert params to query string
</span>    <span class="n">query_string</span> <span class="o">=</span> <span class="s">'&amp;'</span><span class="p">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s">"</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">params</span><span class="p">.</span><span class="n">items</span><span class="p">()])</span>

<span class="c1"># Generate signature
</span>    <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">query_string</span><span class="p">)</span>

<span class="c1"># Headers for the request
</span>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
     <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'*/*'</span>
    <span class="p">}</span>
<span class="n">full_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}{</span><span class="n">endpoint</span><span class="si">}</span><span class="s">?</span><span class="si">{</span><span class="n">query_string</span><span class="si">}</span><span class="s">"</span>

<span class="k">try</span><span class="p">:</span>
<span class="c1"># Send the GET request to fetch margin history
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">full_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span> <span class="c1"># Raises an error for 4xx/5xx responses
</span><span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Margin history fetched successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error: </span><span class="si">{</span><span class="n">err</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">err</span><span class="p">.</span><span class="n">response</span> <span class="k">else</span> <span class="n">err</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// Fetch Margin History</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchMarginHistory</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/fetch-margin-history</span><span class="dl">"</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">startTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1696425435000</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">endTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1725451568979</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCUSDT</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Prepare query parameters</span>
  <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>

<span class="c1">// Optional Params</span>
    <span class="na">pageSize</span><span class="p">:</span> <span class="nx">pageSize</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="na">sortOrder</span><span class="p">:</span> <span class="nx">sortOrder</span><span class="p">,</span>
    <span class="na">startTimestamp</span><span class="p">:</span> <span class="nx">startTimestamp</span><span class="p">,</span>
    <span class="na">endTimestamp</span><span class="p">:</span> <span class="nx">endTimestamp</span><span class="p">,</span>
    <span class="na">symbol</span><span class="p">:</span> <span class="nx">symbol</span><span class="p">,</span>
  <span class="p">};</span>

<span class="c1">// Call the getRequest function</span>
  <span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>pageSize</td>
            <td>string</td>
            <td>No</td>
            <td>The number of results to return per page</td>
        </tr>
        <tr>
            <td>sortOrder</td>
            <td>string</td>
            <td>No</td>
            <td>The sorting order for the results (e.g., "asc" or "desc")</td>
        </tr>
        <tr>
            <td>startTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The start timestamp (in milliseconds) for filtering margin history</td>
        </tr>
        <tr>
            <td>endTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The end timestamp (in milliseconds) for filtering margin history</td>
        </tr>
        <tr>
            <td>symbol</td>
            <td>string</td>
            <td>No</td>
            <td>The trading pair symbol to filter the margin history (e.g., BTCUSDT)</td>
        </tr>
    </tbody>
</table>
<h3 id='response-7'>Response</h3>
<p>The response details are as follows:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">549</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"refId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"marginInMarginAsset"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"marginAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"positionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90483119-0c3a-4cc0-9afa-25366f907fca"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REDUCE_MARGIN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-12T08:59:57.707Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-12T08:59:57.707Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"totalCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nextTimestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1725624883814"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>id</strong></td>
      <td>Unique identifier for the margin operation (<code>549</code>).</td>
    </tr>
    <tr>
      <td><strong>amount</strong></td>
      <td>The amount involved in the margin operation (<code>0.1</code>).</td>
    </tr>
    <tr>
      <td><strong>refId</strong></td>
      <td>Reference ID associated with the operation (<code>null</code>, indicating no reference ID).</td>
    </tr>
    <tr>
      <td><strong>marginInMarginAsset</strong></td>
      <td>Margin in the margin asset (<code>8.7</code> INR).</td>
    </tr>
    <tr>
      <td><strong>marginAsset</strong></td>
      <td>The asset used for margin (<code>INR</code>).</td>
    </tr>
    <tr>
      <td><strong>positionId</strong></td>
      <td>Unique identifier for the position associated with the margin operation (<code>90483119-0c3a-4cc0-9afa-25366f907fca</code>).</td>
    </tr>
    <tr>
      <td><strong>operation</strong></td>
      <td>The type of operation performed (<code>REDUCE_MARGIN</code>).</td>
    </tr>
    <tr>
      <td><strong>createdAt</strong></td>
      <td>Timestamp when the margin operation was created (<code>2024-09-12T08:59:57.707Z</code>).</td>
    </tr>
    <tr>
      <td><strong>updatedAt</strong></td>
      <td>Timestamp when the margin operation was last updated (<code>2024-09-12T08:59:57.707Z</code>).</td>
    </tr>
    <tr>
      <td><strong>totalCount</strong></td>
      <td>The total number of margin operations recorded (<code>45</code>).</td>
    </tr>
    <tr>
      <td><strong>nextTimestamp</strong></td>
      <td>The next timestamp for fetching data (<code>1725624883814</code>).</td>
    </tr>
  </tbody>
</table>

<h2 id="get-positions">Get Positions</h2>

<p><code>GET /v1/positions</code></p>

<p>Retrieves positions based on their status.</p>

<p>It allows filtering positions by their status (e.g., &quot;OPEN&quot;) and supports additional optional parameters such as timestamps, sorting order, page size, and trading symbol.</p>

<p>This endpoint is useful for fetching current or historical positions and managing your trading portfolio.</p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Function to fetch positions
</span><span class="k">def</span> <span class="nf">fetch_positions</span><span class="p">():</span>
<span class="n">position_status</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter position status (open, closed, liquidated): "</span><span class="p">).</span><span class="n">upper</span><span class="p">()</span>
<span class="n">symbol</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the trading pair (e.g., BTCINR): "</span><span class="p">).</span><span class="n">upper</span><span class="p">()</span>

<span class="k">if</span> <span class="n">position_status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">"OPEN"</span><span class="p">,</span> <span class="s">"CLOSED"</span><span class="p">,</span> <span class="s">"LIQUIDATED"</span><span class="p">]:</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Invalid position status. Please enter 'open', 'closed', or 'liquidated'."</span><span class="p">)</span>
<span class="k">return</span>

<span class="c1"># Optional parameters
</span><span class="n">sort_order</span> <span class="o">=</span> <span class="s">"desc"</span> <span class="c1"># Default sort order
</span><span class="n">page_size</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># Default page size
</span>
<span class="c1"># Prepare the query parameters
</span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'sortOrder'</span><span class="p">:</span> <span class="n">sort_order</span><span class="p">,</span>
<span class="s">'pageSize'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">page_size</span><span class="p">),</span>
<span class="s">'symbol'</span><span class="p">:</span> <span class="n">symbol</span><span class="p">,</span>
  <span class="p">}</span>

<span class="c1"># Generate current timestamp
</span><span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
<span class="n">params</span><span class="p">[</span><span class="s">'timestamp'</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span>

<span class="c1"># Generate signature based on the parameters
</span><span class="n">query_string</span> <span class="o">=</span> <span class="s">'&amp;'</span><span class="p">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s">"</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">params</span><span class="p">.</span><span class="n">items</span><span class="p">()])</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">query_string</span><span class="p">)</span>

<span class="c1"># Headers for the GET request
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
<span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
<span class="s">'accept'</span><span class="p">:</span> <span class="s">'*/*'</span>
 <span class="p">}</span>

<span class="c1"># Construct the full URL including the path parameter for position status
</span><span class="n">full_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/v1/positions/</span><span class="si">{</span><span class="n">position_status</span><span class="si">}</span><span class="s">?</span><span class="si">{</span><span class="n">query_string</span><span class="si">}</span><span class="s">"</span>

<span class="k">try</span><span class="p">:</span>
<span class="c1"># Send the GET request to fetch positions
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">full_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span> <span class="c1"># Raises an error for 4xx/5xx responses
</span><span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Positions fetched successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error: </span><span class="si">{</span><span class="n">err</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">err</span><span class="p">.</span><span class="n">response</span> <span class="k">else</span> <span class="n">err</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchPositions</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/positions/</span><span class="dl">"</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">positionStatus</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">OPEN</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Required parameter</span>
  <span class="kd">const</span> <span class="nx">startTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1696425435000</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">endTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1725451568979</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCINR</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>

  <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// Optional Params</span>
    <span class="c1">// pageSize: pageSize.toString(),</span>
    <span class="c1">// sortOrder: sortOrder,</span>
    <span class="c1">// startTimestamp: startTimestamp,</span>
    <span class="c1">// endTimestamp: endTimestamp,</span>
    <span class="c1">// symbol: symbol,</span>
  <span class="p">};</span>
  <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">endpoint</span><span class="p">}${</span><span class="nx">positionStatus</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>

<span class="c1">// Call the getRequest function</span>
  <span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>positionStatus</td>
            <td>string</td>
            <td>Yes</td>
            <td>The status of the positions to retrieve (e.g., "OPEN")</td>
        </tr>
        <tr>
            <td>startTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The start timestamp (in milliseconds) for filtering positions</td>
        </tr>
        <tr>
            <td>endTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The end timestamp (in milliseconds) for filtering positions</td>
        </tr>
        <tr>
            <td>sortOrder</td>
            <td>string</td>
            <td>No</td>
            <td>The sorting order for the results (e.g., "asc" or "desc")</td>
        </tr>
        <tr>
            <td>pageSize</td>
            <td>string</td>
            <td>No</td>
            <td>The number of results to return per page</td>
        </tr>
        <tr>
            <td>symbol</td>
            <td>string</td>
            <td>No</td>
            <td>The trading pair symbol to filter positions (e.g., BTCINR)</td>
        </tr>
    </tbody>
</table>
<h3 id='response-8'>Response</h3>
<p>The response parameters are described below:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5454</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contractPair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GRTINR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entryPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.541</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidationPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">11.4</span><span class="p">,</span><span class="w">
  </span><span class="nl">"marginType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISOLATED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">45.6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"marginInMarginAsset"</span><span class="p">:</span><span class="w"> </span><span class="mf">45.6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"positionAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w">
  </span><span class="nl">"positionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8b56348d-0d5d-4de1-85e1-3325bdf84087"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"positionSize"</span><span class="p">:</span><span class="w"> </span><span class="mf">451.48</span><span class="p">,</span><span class="w">
  </span><span class="nl">"positionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"positionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LONG"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"realizedProfit"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w">
  </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GRT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"marginAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-16T09:39:41.689Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-16T09:39:41.689Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>id</strong></td>
      <td>Unique identifier for the position (<code>5454</code>).</td>
    </tr>
    <tr>
      <td><strong>contractPair</strong></td>
      <td>The trading pair for the contract (<code>GRTINR</code>), indicating GRT traded against INR.</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>The type of contract (<code>PERPETUAL</code>), indicating a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>entryPrice</strong></td>
      <td>The price at which the position was entered (<code>12.541 INR</code> per GRT).</td>
    </tr>
    <tr>
      <td><strong>leverage</strong></td>
      <td>The leverage applied to the trade (<code>10x</code>).</td>
    </tr>
    <tr>
      <td><strong>liquidationPrice</strong></td>
      <td>The price at which the position would be liquidated (<code>11.4 INR</code> per GRT).</td>
    </tr>
    <tr>
      <td><strong>marginType</strong></td>
      <td>The type of margin used for the position (<code>ISOLATED</code>).</td>
    </tr>
    <tr>
      <td><strong>margin</strong></td>
      <td>The amount of margin allocated to the position (<code>45.6 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>marginInMarginAsset</strong></td>
      <td>The amount of margin in the margin asset (<code>45.6 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>positionAmount</strong></td>
      <td>The amount of the position (<code>36 GRT</code>).</td>
    </tr>
    <tr>
      <td><strong>positionId</strong></td>
      <td>Unique identifier for the position (<code>8b56348d-0d5d-4de1-85e1-3325bdf84087</code>).</td>
    </tr>
    <tr>
      <td><strong>positionSize</strong></td>
      <td>The size of the position in terms of value (<code>451.48 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>positionStatus</strong></td>
      <td>The current status of the position (<code>OPEN</code>).</td>
    </tr>
    <tr>
      <td><strong>positionType</strong></td>
      <td>The type of position (<code>LONG</code>).</td>
    </tr>
    <tr>
      <td><strong>realizedProfit</strong></td>
      <td>The profit realized from the position (<code>null</code>, indicating no realized profit yet).</td>
    </tr>
    <tr>
      <td><strong>quantity</strong></td>
      <td>The quantity of the asset involved (<code>36 GRT</code>).</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The base asset being traded (<code>GRT</code>).</td>
    </tr>
    <tr>
      <td><strong>marginAsset</strong></td>
      <td>The asset used for margin (<code>INR</code>).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (<code>INR</code>).</td>
    </tr>
    <tr>
      <td><strong>createdTime</strong></td>
      <td>The timestamp when the position was created (<code>2024-09-16T09:39:41.689Z</code>).</td>
    </tr>
    <tr>
      <td><strong>updatedTime</strong></td>
      <td>The timestamp when the position was last updated (<code>2024-09-16T09:39:41.689Z</code>).</td>
    </tr>
  </tbody>
</table>

<h2 id="get-position-status">Get Position Status</h2>

<p><code>GET /v1/positions/{positionStatus}</code></p>

<p>Retrieves details for a specific position identified by its unique position ID.</p>

<p>It returns information related to the specified position, such as current status, asset details, and other relevant data.</p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">get_positions</span><span class="p">():</span>
 <span class="n">position_status</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter position status (open, closed, liquidated): "</span><span class="p">).</span><span class="n">upper</span><span class="p">()</span>

  <span class="k">if</span> <span class="n">position_status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">"OPEN"</span><span class="p">,</span> <span class="s">"CLOSED"</span><span class="p">,</span> <span class="s">"LIQUIDATED"</span><span class="p">]:</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Invalid position status. Please enter 'open', 'closed', or 'liquidated'."</span><span class="p">)</span>
  <span class="k">return</span>

<span class="c1"># Generate the current timestamp
</span>    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># Prepare the query parameters
</span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'sortOrder'</span><span class="p">:</span> <span class="s">'desc'</span><span class="p">,</span>
    <span class="s">'pageSize'</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="p">}</span>

<span class="c1"># Convert the params into a query string to sign
</span>    <span class="n">query_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"sortOrder=</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'sortOrder'</span><span class="p">]</span><span class="si">}</span><span class="s">&amp;pageSize=</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'pageSize'</span><span class="p">]</span><span class="si">}</span><span class="s">&amp;timestamp=
    </span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'timestamp'</span><span class="p">]</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Generate the signature
</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">query_string</span><span class="p">)</span>

<span class="c1"># Headers for the GET request
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
<span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
<span class="s">'accept'</span><span class="p">:</span> <span class="s">'*/*'</span>
 <span class="p">}</span>

<span class="c1"># Construct the full URL including the path parameter for position status
</span><span class="n">full_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/v1/positions/</span><span class="si">{</span><span class="n">position_status</span><span class="si">}</span><span class="s">?sortOrder=</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'sortOrder'</span><span class="p">]</span><span class="si">}</span><span class="s">&amp;pageSize=
</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'pageSize'</span><span class="p">]</span><span class="si">}</span><span class="s">&amp;timestamp=</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="s">'timestamp'</span><span class="p">]</span><span class="si">}</span><span class="s">"</span>

<span class="k">try</span><span class="p">:</span>
<span class="c1"># Send the GET request to fetch positions
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">full_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span> <span class="c1"># Raises an error for 4xx/5xx responses
</span><span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'Positions fetched successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error: </span><span class="si">{</span><span class="n">err</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">err</span><span class="p">.</span><span class="n">response</span> <span class="k">else</span> <span class="n">err</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">getPosition</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/positions</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">positionId</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">sample-2c52-45cb-addf-9c1fde92fce5</span><span class="dl">"</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">positionId</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>positionId</td>
            <td>string</td>
            <td>Yes</td>
            <td>The unique identifier for the position to retrieve</td>
        </tr>
    </tbody>
</table>
<h3 id='response-9'>Response</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractPair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSDT"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"entryPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">58003.7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidationPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">52173.1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"marginType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISOLATED"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"marginAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">19.404</span><span class="p">,</span><span class="w">
        </span><span class="nl">"marginInMarginAsset"</span><span class="p">:</span><span class="w"> </span><span class="mf">1688.15</span><span class="p">,</span><span class="w">
        </span><span class="nl">"positionAmount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.003</span><span class="p">,</span><span class="w">
        </span><span class="nl">"positionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dd89732b-3a9d-4500-acec-64e1384c7149"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"positionSize"</span><span class="p">:</span><span class="w"> </span><span class="mf">174.0111</span><span class="p">,</span><span class="w">
        </span><span class="nl">"positionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPEN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"positionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LONG"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"realizedProfit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.003</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-13T08:19:18.642Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iconUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/pi42-dev-static/contract-icons/btc.png"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>contractPair</strong></td>
      <td>The trading pair for the contract (<code>BTCUSDT</code>), indicating Bitcoin (BTC) traded against USDT (Tether).</td>
    </tr>
    <tr>
      <td><strong>entryPrice</strong></td>
      <td>The price at which the position was entered (<code>58003.7 USDT</code>).</td>
    </tr>
    <tr>
      <td><strong>leverage</strong></td>
      <td>The leverage applied to the trade (<code>9x</code>).</td>
    </tr>
    <tr>
      <td><strong>liquidationPrice</strong></td>
      <td>The price at which the position would be liquidated (<code>52173.1 USDT</code>).</td>
    </tr>
    <tr>
      <td><strong>marginType</strong></td>
      <td>The type of margin used for the position (<code>ISOLATED</code>).</td>
    </tr>
    <tr>
      <td><strong>marginAsset</strong></td>
      <td>The asset used for margin (<code>INR</code>).</td>
    </tr>
    <tr>
      <td><strong>margin</strong></td>
      <td>The amount of margin allocated to the position (<code>19.404 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>marginInMarginAsset</strong></td>
      <td>The amount of margin in the margin asset (<code>1688.15 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>positionAmount</strong></td>
      <td>The amount of the position (<code>0.003 BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>positionId</strong></td>
      <td>Unique identifier for the position (<code>dd89732b-3a9d-4500-acec-64e1384c7149</code>).</td>
    </tr>
    <tr>
      <td><strong>positionSize</strong></td>
      <td>The size of the position in terms of value (<code>174.0111 USDT</code>).</td>
    </tr>
    <tr>
      <td><strong>positionStatus</strong></td>
      <td>The current status of the position (<code>OPEN</code>).</td>
    </tr>
    <tr>
      <td><strong>positionType</strong></td>
      <td>The type of position (<code>LONG</code>).</td>
    </tr>
    <tr>
      <td><strong>realizedProfit</strong></td>
      <td>The profit realized from the position (<code>0</code>, indicating no realized profit yet).</td>
    </tr>
    <tr>
      <td><strong>quantity</strong></td>
      <td>The quantity of the asset involved (<code>0.003 BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>createdAt</strong></td>
      <td>The timestamp when the position was created (<code>2024-09-13T08:19:18.642Z</code>).</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>The type of contract (<code>PERPETUAL</code>), indicating a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>iconUrl</strong></td>
      <td>The URL for the contract icon (<code>https://storage.googleapis.com/pi42-dev-static/contract-icons/btc.png</code>).</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The base asset being traded (<code>BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (<code>USDT</code>).</td>
    </tr>
  </tbody>
</table>

<h2 id="trade-history">Get User's Trade History</h2>

<p><code>GET /v1/user-data/trade-history</code></p>

<p>Retrieves the trade history for a user.</p>

<p>It supports optional filtering parameters such as timestamps, sorting order, page size, and trading symbol to help users access their historical trade data efficiently.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchUserTradeHistory</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/user-data/trade-history</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">startTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1696425435000</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">endTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1725451568979</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// Optional</span>
  <span class="kd">const</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCINR</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Optional</span>

<span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
   <span class="c1">//Optional Params</span>
    <span class="na">pageSize</span><span class="p">:</span> <span class="nx">pageSize</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
    <span class="na">sortOrder</span><span class="p">:</span> <span class="nx">sortOrder</span><span class="p">,</span>
    <span class="na">startTimestamp</span><span class="p">:</span> <span class="nx">startTimestamp</span><span class="p">,</span>
    <span class="na">endTimestamp</span><span class="p">:</span> <span class="nx">endTimestamp</span><span class="p">,</span>
    <span class="na">symbol</span><span class="p">:</span> <span class="nx">symbol</span><span class="p">,</span>
  <span class="p">};</span>

<span class="c1">// Call the getRequest function</span>
  <span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Function to fetch trade history
</span><span class="k">def</span> <span class="nf">trade_history</span><span class="p">():</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>
    <span class="n">trade_history_url</span> <span class="o">=</span> <span class="s">"https://fapi.pi42.com/v1/user-data/trade-history"</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">sortOrder</span><span class="s">': '</span><span class="n">desc</span><span class="s">',
    '</span><span class="n">pageSize</span><span class="s">': 100,
    '</span><span class="n">timestamp</span><span class="s">': timestamp
 }

query_string = f"sortOrder={params['</span><span class="n">sortOrder</span><span class="s">']}&amp;pageSize={params['</span><span class="n">pageSize</span><span class="s">']}&amp;timestamp=
{params['</span><span class="n">timestamp</span><span class="s">']}"

 signature = generate_signature(api_secret, query_string)

 headers = {
    '</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="s">': api_key,
    '</span><span class="n">signature</span><span class="s">': signature,
    '</span><span class="n">accept</span><span class="s">': '</span><span class="o">*/*</span><span class="s">'
 }

try:
    response = requests.get(f"{trade_history_url}?{query_string}", headers=headers)
    response.raise_for_status()
    response_data = response.json()
    print('</span><span class="n">Trade</span> <span class="n">history</span> <span class="n">fetched</span> <span class="n">successfully</span><span class="p">:</span><span class="s">', json.dumps(response_data, indent=4))
except requests.exceptions.HTTPError as err:
    print(f"Failed {response.status_code}: {response.text}")
</span></code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>startTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The start timestamp (in milliseconds) for filtering trade history</td>
        </tr>
        <tr>
            <td>endTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The end timestamp (in milliseconds) for filtering trade history</td>
        </tr>
        <tr>
            <td>sortOrder</td>
            <td>string</td>
            <td>No</td>
            <td>The sorting order for the results (e.g., "asc" or "desc")</td>
        </tr>
        <tr>
            <td>pageSize</td>
            <td>string</td>
            <td>No</td>
            <td>The number of results to return per page</td>
        </tr>
        <tr>
            <td>symbol</td>
            <td>string</td>
            <td>No</td>
            <td>The trading pair symbol to filter trade history (e.g., BTCINR)</td>
        </tr>
    </tbody>
</table>
<h3 id='response-10'>Response</h3>
<p>The response parameters are as follows:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">26260</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-16T09:39:41.675Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GRTINR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LIMIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.541</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"realizedProfit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8acc0af94a3516126cdf-6238-ext"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GRT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"marginAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>id</strong></td>
      <td>Unique identifier for the order (<code>26260</code>).</td>
    </tr>
    <tr>
      <td><strong>time</strong></td>
      <td>Timestamp when the order was placed (<code>2024-09-16T09:39:41.675Z</code>).</td>
    </tr>
    <tr>
      <td><strong>symbol</strong></td>
      <td>The trading pair for the order (<code>GRTINR</code>), indicating GRT (The Graph) traded against INR (Indian Rupee).</td>
    </tr>
    <tr>
      <td><strong>type</strong></td>
      <td>The type of order (<code>LIMIT</code>), indicating a limit order.</td>
    </tr>
    <tr>
      <td><strong>side</strong></td>
      <td>The side of the order (<code>BUY</code>).</td>
    </tr>
    <tr>
      <td><strong>price</strong></td>
      <td>The price at which the order is to be executed (<code>12.541 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>quantity</strong></td>
      <td>The quantity of the order (<code>36 GRT</code>).</td>
    </tr>
    <tr>
      <td><strong>role</strong></td>
      <td>The role of the order in the trade (<code>MAKER</code>), indicating the order added liquidity to the market.</td>
    </tr>
    <tr>
      <td><strong>fee</strong></td>
      <td>The fee charged for the order (<code>0</code>, indicating no fee).</td>
    </tr>
    <tr>
      <td><strong>realizedProfit</strong></td>
      <td>The profit realized from the order (<code>0</code>, indicating no realized profit yet).</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>The type of contract for the order (<code>PERPETUAL</code>), indicating a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>clientOrderId</strong></td>
      <td>Unique identifier for the client order (<code>8acc0af94a3516126cdf-6238-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The base asset being traded (<code>GRT</code>).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (<code>INR</code>).</td>
    </tr>
    <tr>
      <td><strong>marginAsset</strong></td>
      <td>The asset used for margin (<code>INR</code>).</td>
    </tr>
  </tbody>
</table>

<h2 id="get-transaction-history">Get User's Transaction History</h2>

<p><code>GET/v1/user-data/transaction-history</code></p>

<p>Retrieves the transaction history for a user, allowing filtering and sorting based on optional parameters.</p>

<p>It provides detailed records of transactions within the specified time range and can be filtered by trading symbol, trade ID, and position ID.</p>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">get_transaction_history</span><span class="p">():</span>
    <span class="c1"># Default values for optional parameters
</span>    <span class="n">start_timestamp</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">end_timestamp</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">sort_order</span> <span class="o">=</span> <span class="s">'desc'</span>
    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">symbol</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">trade_id</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">position_id</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1"># Generate the current timestamp (used as part of the authentication/signing process)
</span>    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

    <span class="c1"># Prepare query parameters with required and optional fields
</span>    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'sortOrder'</span><span class="p">:</span> <span class="n">sort_order</span><span class="p">,</span>
        <span class="s">'pageSize'</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
        <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="p">}</span>

    <span class="c1"># Include optional parameters only if they are provided
</span>    <span class="k">if</span> <span class="n">start_timestamp</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s">'startTimestamp'</span><span class="p">]</span> <span class="o">=</span> <span class="n">start_timestamp</span>
    <span class="k">if</span> <span class="n">end_timestamp</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s">'endTimestamp'</span><span class="p">]</span> <span class="o">=</span> <span class="n">end_timestamp</span>
    <span class="k">if</span> <span class="n">symbol</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s">'symbol'</span><span class="p">]</span> <span class="o">=</span> <span class="n">symbol</span>
    <span class="k">if</span> <span class="n">trade_id</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s">'tradeId'</span><span class="p">]</span> <span class="o">=</span> <span class="n">trade_id</span>
    <span class="k">if</span> <span class="n">position_id</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s">'positionId'</span><span class="p">]</span> <span class="o">=</span> <span class="n">position_id</span>

    <span class="c1"># Convert the parameters to a query string to be signed
</span>    <span class="n">query_string</span> <span class="o">=</span> <span class="s">'&amp;'</span><span class="p">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s">"</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">params</span><span class="p">.</span><span class="n">items</span><span class="p">()])</span>

    <span class="c1"># Generate the signature (assuming `generate_signature` is defined)
</span>    <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">query_string</span><span class="p">)</span>

    <span class="c1"># Headers for the GET request
</span>    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
        <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
        <span class="s">'accept'</span><span class="p">:</span> <span class="s">'*/*'</span>
    <span class="p">}</span>

    <span class="c1"># Construct the full URL with the query string
</span>    <span class="n">full_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/v1/user-data/transaction-history?</span><span class="si">{</span><span class="n">query_string</span><span class="si">}</span><span class="s">"</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Send the GET request to fetch transaction history
</span>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">full_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># Raises an error for HTTP 4xx/5xx responses
</span>        <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Transaction history fetched successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c1"># Handle specific HTTP errors
</span>        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"HTTP Error: </span><span class="si">{</span><span class="n">err</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">err</span><span class="p">.</span><span class="n">response</span> <span class="k">else</span> <span class="s">'No response text'</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Handle any other exceptions
</span>        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Failed </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchUserTransactionHistory</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/user-data/transaction-history</span><span class="dl">"</span><span class="p">;</span>

    <span class="c1">// Optional parameters for filtering and sorting the transaction history</span>
    <span class="kd">const</span> <span class="nx">startTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1696425435000</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Start timestamp in milliseconds</span>
    <span class="kd">const</span> <span class="nx">endTimestamp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">1725451568979</span><span class="dl">"</span><span class="p">;</span>   <span class="c1">// End timestamp in milliseconds</span>
    <span class="kd">const</span> <span class="nx">sortOrder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">;</span>               <span class="c1">// Sorting order: "asc" or "desc"</span>
    <span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>                   <span class="c1">// Number of records per page</span>
    <span class="kd">const</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCINR</span><span class="dl">"</span><span class="p">;</span>                <span class="c1">// Trading symbol, e.g., "BTCINR"</span>
    <span class="kd">const</span> <span class="nx">tradeId</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>                     <span class="c1">// Specific trade ID to filter</span>
    <span class="kd">const</span> <span class="nx">positionId</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">3d5f302b-2c52-45cb-addf-9c1fde92fce5</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Specific position ID</span>

    <span class="c1">// Construct the query parameters object</span>
    <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">pageSize</span><span class="p">:</span> <span class="nx">pageSize</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span>
        <span class="na">sortOrder</span><span class="p">:</span> <span class="nx">sortOrder</span><span class="p">,</span>
        <span class="na">startTimestamp</span><span class="p">:</span> <span class="nx">startTimestamp</span><span class="p">,</span>
        <span class="na">endTimestamp</span><span class="p">:</span> <span class="nx">endTimestamp</span><span class="p">,</span>
        <span class="na">symbol</span><span class="p">:</span> <span class="nx">symbol</span><span class="p">,</span>
        <span class="na">tradeId</span><span class="p">:</span> <span class="nx">tradeId</span><span class="p">,</span>
        <span class="na">positionId</span><span class="p">:</span> <span class="nx">positionId</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="c1">// Call the getRequest function with the endpoint and query parameters</span>
    <span class="k">return</span> <span class="k">await</span> <span class="nx">getRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>startTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The start timestamp (in milliseconds) for filtering transaction history</td>
        </tr>
        <tr>
            <td>endTimestamp</td>
            <td>string</td>
            <td>No</td>
            <td>The end timestamp (in milliseconds) for filtering transaction history</td>
        </tr>
        <tr>
            <td>sortOrder</td>
            <td>string</td>
            <td>No</td>
            <td>The sorting order for the results (e.g., "asc" or "desc")</td>
        </tr>
        <tr>
            <td>pageSize</td>
            <td>string</td>
            <td>No</td>
            <td>The number of records to return per page</td>
        </tr>
        <tr>
            <td>symbol</td>
            <td>string</td>
            <td>No</td>
            <td>The trading symbol to filter the transaction history (e.g., BTCINR)</td>
        </tr>
        <tr>
            <td>tradeId</td>
            <td>number</td>
            <td>No</td>
            <td>The specific trade ID to filter the transaction history</td>
        </tr>
        <tr>
            <td>positionId</td>
            <td>string</td>
            <td>No</td>
            <td>The specific position ID to filter the transaction history</td>
        </tr>
    </tbody>
</table>
<h3 id='response-11'>Response</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">109884</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-09-16T09:39:28.754Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMISSION"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCINR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>id</strong></td>
      <td>Unique identifier for the transaction (<code>109884</code>).</td>
    </tr>
    <tr>
      <td><strong>time</strong></td>
      <td>Timestamp when the transaction occurred (<code>2024-09-16T09:39:28.754Z</code>).</td>
    </tr>
    <tr>
      <td><strong>type</strong></td>
      <td>The type of the transaction (<code>COMMISSION</code>), indicating a commission fee.</td>
    </tr>
    <tr>
      <td><strong>amount</strong></td>
      <td>The amount of the commission fee (<code>-2.1 INR</code>).</td>
    </tr>
    <tr>
      <td><strong>asset</strong></td>
      <td>The asset for the commission fee (<code>INR</code>).</td>
    </tr>
    <tr>
      <td><strong>symbol</strong></td>
      <td>The trading pair associated with the transaction (<code>BTCINR</code>), indicating Bitcoin (BTC) traded against Indian Rupee (INR).</td>
    </tr>
    <tr>
      <td><strong>contractType</strong></td>
      <td>The type of contract for the transaction (<code>PERPETUAL</code>), indicating a perpetual futures contract.</td>
    </tr>
    <tr>
      <td><strong>baseAsset</strong></td>
      <td>The base asset in the trading pair (<code>BTC</code>).</td>
    </tr>
    <tr>
      <td><strong>quoteAsset</strong></td>
      <td>The currency used for the transaction (<code>INR</code>).</td>
    </tr>
  </tbody>
</table>

<h2 id='exchange-update-leverage'>Update Leverage</h2>

<p><code>POST /v1/exchange/update/leverage</code></p>

<p>Updates the leverage for a specified contract. It allows setting the leverage level for trading a particular asset or trading pair.</p>

<p>This endpoint is used to adjust the leverage settings for risk management and trading strategies.</p>

<aside class="notice">Notes:
<ol>
<li><strong>Update Leverage for Specific Symbols</strong></li>
<ul>
<li>Users can adjust the leverage for individual symbols using the <code>/update/leverage </code> endpoint.</li>
<li>This adjustment applies only to the specified symbol.</li>
</ul>
<li><strong>Placing Orders</strong></li>
<ul>
<li>Orders will be executed with the leverage that was previously set for the symbol.</li>
<li>To use a different leverage for an order, users must first update the leverage for the symbol via the <code>/update/leverage</code> endpoint.</li>
</ul>
</ol>
</aside>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">updateLeverage</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/exchange/update/leverage</span><span class="dl">"</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">leverage</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">contractName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">BTCINR</span><span class="dl">"</span><span class="p">;</span>

    <span class="c1">// Prepare request payload</span>
    <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">leverage</span><span class="p">:</span> <span class="nx">leverage</span><span class="p">,</span>       <span class="c1">// Ensure leverage is an integer</span>
        <span class="na">contractName</span><span class="p">:</span> <span class="nx">contractName</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="c1">// Call the postRequest function</span>
    <span class="k">return</span> <span class="k">await</span> <span class="nx">postRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">update_leverage</span><span class="p">():</span>
  <span class="n">leverage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">"Enter the leverage value: "</span><span class="p">))</span>
  <span class="n">contract_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the contract name: "</span><span class="p">)</span>

  <span class="c1"># Generate the current timestamp
</span>  <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

  <span class="c1"># Prepare the request body (JSON)
</span>  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s">'leverage'</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">leverage</span><span class="p">),</span>
      <span class="s">'contractName'</span><span class="p">:</span> <span class="n">contract_name</span><span class="p">,</span>
      <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
  <span class="p">}</span>

  <span class="c1"># Convert the request body to a JSON string for signing
</span>  <span class="n">data_to_sign</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>

  <span class="c1"># Generate the signature
</span>  <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data_to_sign</span><span class="p">)</span>

  <span class="c1"># Headers for the POST request
</span>  <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
      <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
      <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span>
  <span class="p">}</span>

  <span class="c1"># Construct the full URL
</span>  <span class="n">update_leverage_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/v1/exchange/update/leverage"</span>

  <span class="k">try</span><span class="p">:</span>
      <span class="c1"># Send the POST request to update the leverage
</span>      <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">update_leverage_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
      <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span> <span class="c1"># Raises an error for 4xx/5xx responses
</span>      <span class="n">response_data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
      <span class="k">print</span><span class="p">(</span><span class="s">'Leverage updated successfully:'</span><span class="p">,</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">response_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
  <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Error: </span><span class="si">{</span><span class="n">err</span><span class="p">.</span><span class="n">response</span><span class="p">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">err</span><span class="p">.</span><span class="n">response</span> <span class="k">else</span> <span class="n">err</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
  <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"An unexpected error occurred: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>leverage</td>
            <td>number</td>
            <td>Yes</td>
            <td>The leverage level to set for the contract (e.g., 10). Must be an integer.</td>
        </tr>
        <tr>
            <td>contractName</td>
            <td>string</td>
            <td>Yes</td>
            <td>The trading pair or contract name to which the leverage applies (e.g., BTCINR)</td>
        </tr>
    </tbody>
</table>
<h3 id='response-12'>Response</h3>
<p>The response parameters are described below:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"updatedLeverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contractName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHINR"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>updatedLeverage</strong></td>
      <td>The updated leverage for the contract (<code>10</code>).</td>
    </tr>
    <tr>
      <td><strong>contractName</strong></td>
      <td>The name of the contract (<code>ETHINR</code>), indicating Ethereum (ETH) traded against Indian Rupee (INR).</td>
    </tr>
  </tbody>
</table>

<h2 id="delete-order"> Deleting an Order</h2>

<p><code>DELETE /v1/order/delete-order</code></p>

<p>deletes a specific order based on its client order ID.</p>

<p>It requires the client order ID (<code>clientOrderID</code>) to identify the order to be deleted and a timestamp for request validation.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">deleteOrder</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">endpoint</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/v1/order/delete-order</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">clientOrderId</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">a9c5ba9893c99828e4b5-6238-ext</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span>

    <span class="c1">// Prepare request payload</span>
    <span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">clientOrderId</span><span class="p">:</span> <span class="nx">clientOrderId</span><span class="p">,</span>
        <span class="na">timestamp</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="c1">// Call the deleteRequest function</span>
    <span class="k">return</span> <span class="k">await</span> <span class="nx">deleteRequest</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">delete_order</span><span class="p">():</span>
    <span class="n">client_order_id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter the clientOrderId to delete: "</span><span class="p">)</span>
    <span class="n">delete_order_url</span> <span class="o">=</span> <span class="s">"https://fapi.pi42.com/v1/order/delete-order"</span>

    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'clientOrderId'</span><span class="p">:</span> <span class="n">client_order_id</span><span class="p">,</span>
        <span class="s">'timestamp'</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="p">}</span>

    <span class="n">data_to_sign</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">':'</span><span class="p">))</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data_to_sign</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'api-key'</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
        <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
        <span class="s">'signature'</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="n">delete_order_url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Order with clientOrderId </span><span class="si">{</span><span class="n">client_order_id</span><span class="si">}</span><span class="s"> deleted successfully."</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">HTTPError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Failed </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div>
<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>clientOrderId</td>
            <td>string</td>
            <td>Yes</td>
            <td>The unique identifier for the order to be deleted (e.g., a9c5ba9893c99828e4b5-6238-ext)</td>
        </tr>
        <tr>
            <td>timestamp</td>
            <td>string</td>
            <td>Yes</td>
            <td>The current timestamp (in milliseconds) for request validation</td>
        </tr>
    </tbody>
</table>

<aside class="notice">
Requires <code>clientOrderId</code> that can be retrieved from <a href="#get-open-orders">Get Open Orders API</a>.
</aside>
<h3 id='response-13'>Response</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"clientOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"93513fe2a8af44157234-6238-ext"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">24717</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>clientOrderId</strong></td>
      <td>Unique identifier for the client order (<code>93513fe2a8af44157234-6238-ext</code>).</td>
    </tr>
    <tr>
      <td><strong>orderId</strong></td>
      <td>Unique identifier for the order (<code>24717</code>).</td>
    </tr>
    <tr>
      <td><strong>status</strong></td>
      <td>The status of the order (<code>CANCELED</code>).</td>
    </tr>
    <tr>
      <td><strong>success</strong></td>
      <td>Indicates whether the operation was successful (<code>true</code>).</td>
    </tr>
  </tbody>
</table>
